# Mock Data Guide - Customer Frontend

## 개요
백엔드 API 없이 Customer Frontend를 테스트할 수 있도록 Mock 데이터를 제공합니다.

---

## 🎯 Mock 모드 활성화

### 환경 변수 설정
`.env` 파일에서 Mock 모드를 제어할 수 있습니다:

```env
# Mock Mode 활성화
VITE_USE_MOCK=true

# Mock Mode 비활성화 (실제 API 사용)
VITE_USE_MOCK=false
```

**기본값**: `true` (Mock 모드 활성화)

---

## 📦 제공되는 Mock 데이터

### 1. 메뉴 데이터 (20개)

#### 메인 요리 (7개)
1. **마르게리타 피자** - 15,000원
2. **페퍼로니 피자** - 18,000원
3. **불고기 피자** - 19,000원
4. **까르보나라 파스타** - 14,000원
5. **토마토 파스타** - 13,000원
6. **스테이크** - 28,000원
7. **하와이안 피자** - 17,000원 (품절)

#### 사이드 메뉴 (4개)
1. **감자튀김** - 5,000원
2. **치즈스틱** - 6,000원
3. **양파링** - 5,500원
4. **시저 샐러드** - 8,000원

#### 음료 (5개)
1. **콜라** - 2,500원
2. **사이다** - 2,500원
3. **오렌지 주스** - 3,500원
4. **아메리카노** - 4,000원
5. **카페라떼** - 4,500원

#### 디저트 (4개)
1. **티라미수** - 7,000원
2. **초콜릿 케이크** - 6,500원
3. **치즈케이크** - 6,500원
4. **아이스크림** - 4,000원

**특징**:
- ✅ 모든 메뉴에 이미지 URL 포함 (Unsplash)
- ✅ 카테고리별 분류
- ✅ 품절 메뉴 1개 포함 (테스트용)

---

### 2. 인증 데이터

#### 테스트 계정
```
매장 ID: store-1 (또는 아무거나)
테이블 번호: 1 (또는 아무거나)
테이블 비밀번호: password 또는 1234
```

**로그인 성공 시 반환 데이터**:
```json
{
  "token": "mock-jwt-token-12345",
  "table_id": "table-1",
  "table_name": "테이블 1",
  "store_id": "store-1",
  "store_name": "테스트 레스토랑",
  "session_id": "session-12345",
  "expires_at": "2026-02-04T18:35:00Z"
}
```

---

### 3. 주문 데이터 (2개)

#### 주문 1 (완료)
- **주문번호**: order-1
- **상태**: completed
- **항목**:
  - 마르게리타 피자 x 1 (15,000원)
  - 감자튀김 x 2 (10,000원)
  - 콜라 x 2 (5,000원)
- **총 금액**: 30,000원
- **주문 시간**: 1시간 전

#### 주문 2 (준비 중)
- **주문번호**: order-2
- **상태**: preparing
- **항목**:
  - 까르보나라 파스타 x 1 (14,000원)
  - 시저 샐러드 x 1 (8,000원)
- **총 금액**: 22,000원
- **주문 시간**: 10분 전

---

## 🧪 테스트 시나리오

### 시나리오 1: 로그인 테스트

1. **브라우저 접속**: http://localhost:5173/
2. **로그인 정보 입력**:
   - 매장 ID: `store-1`
   - 테이블 번호: `1`
   - 테이블 비밀번호: `password`
3. **로그인 버튼 클릭**
4. **예상 결과**: 
   - ✅ 로그인 성공
   - ✅ 메뉴 페이지로 리다이렉트
   - ✅ localStorage에 세션 저장

---

### 시나리오 2: 메뉴 조회 및 필터링

1. **메뉴 페이지 접속**: http://localhost:5173/customer/menu
2. **예상 결과**:
   - ✅ 20개 메뉴 표시 (품절 1개 포함)
   - ✅ 카테고리 필터 버튼 표시 (전체, 메인, 사이드, 음료, 디저트)
   - ✅ 각 메뉴에 이미지, 이름, 설명, 가격 표시

3. **카테고리 필터링 테스트**:
   - "메인" 클릭 → 7개 메뉴 표시
   - "사이드" 클릭 → 4개 메뉴 표시
   - "음료" 클릭 → 5개 메뉴 표시
   - "디저트" 클릭 → 4개 메뉴 표시
   - "전체" 클릭 → 20개 메뉴 표시

4. **품절 메뉴 테스트**:
   - "하와이안 피자" 찾기
   - "품절" 버튼 확인 (비활성화)

---

### 시나리오 3: 장바구니 테스트

1. **메뉴 추가**:
   - "마르게리타 피자" → "장바구니에 추가" 클릭
   - "감자튀김" → "장바구니에 추가" 클릭 (2번)
   - "콜라" → "장바구니에 추가" 클릭

2. **장바구니 페이지 접속**: http://localhost:5173/customer/cart

3. **예상 결과**:
   - ✅ 마르게리타 피자 x 1 (15,000원)
   - ✅ 감자튀김 x 2 (10,000원)
   - ✅ 콜라 x 1 (2,500원)
   - ✅ 총 수량: 4개
   - ✅ 총 금액: 27,500원

4. **수량 변경 테스트**:
   - 감자튀김 "+" 버튼 클릭 → 수량 3으로 증가
   - 콜라 "-" 버튼 클릭 → 항목 제거 (수량 0)

5. **localStorage 확인**:
   - F12 → Application → Local Storage
   - `customer_cart` 키 확인
   - 장바구니 데이터 저장 확인

---

### 시나리오 4: 주문 생성 테스트

1. **장바구니에서 "주문하기" 클릭**

2. **예상 결과**:
   - ✅ 주문 생성 성공 (0.8초 지연)
   - ✅ 주문 확인 페이지로 리다이렉트
   - ✅ 주문번호 표시 (order-3, order-4 등)
   - ✅ 주문 항목 및 총 금액 표시
   - ✅ "5초 후 메뉴 페이지로 이동합니다..." 메시지

3. **자동 리다이렉트**:
   - 5초 대기
   - ✅ 메뉴 페이지로 자동 이동

4. **장바구니 초기화 확인**:
   - 장바구니 페이지 접속
   - ✅ "장바구니가 비어있습니다" 메시지

---

### 시나리오 5: 주문 내역 테스트

1. **주문 내역 페이지 접속**: http://localhost:5173/customer/order-history

2. **예상 결과**:
   - ✅ 기존 주문 2개 표시 (order-1, order-2)
   - ✅ 새로 생성한 주문 표시 (order-3 등)
   - ✅ 각 주문에 주문번호, 상태, 시간, 항목, 총 금액 표시
   - ✅ 상태별 스타일링 (pending, preparing, completed)

3. **자동 폴링 테스트**:
   - 페이지를 5분간 열어둠
   - ✅ 5분마다 자동으로 주문 내역 재조회

---

### 시나리오 6: 전체 플로우 테스트

**완전한 고객 여정 테스트**:

1. **로그인** (store-1, 테이블 1, password)
2. **메뉴 조회** (20개 메뉴 확인)
3. **메뉴 추가**:
   - 페퍼로니 피자 x 2
   - 시저 샐러드 x 1
   - 아메리카노 x 2
   - 티라미수 x 1
4. **장바구니 확인** (총 6개 항목, 62,000원)
5. **주문 생성**
6. **주문 확인 페이지** (주문번호, 항목, 금액 확인)
7. **자동 리다이렉트** (5초 후 메뉴 페이지)
8. **주문 내역 확인** (새 주문 포함 총 3개)

---

## 🔍 Mock 데이터 동작 방식

### API 호출 시뮬레이션
Mock 모드에서는 실제 네트워크 요청 없이 로컬 데이터를 반환합니다:

```typescript
// 예시: menuService.ts
export async function fetchMenus(storeId: string): Promise<MenuItem[]> {
  if (USE_MOCK) {
    // 네트워크 지연 시뮬레이션 (500ms)
    await new Promise((resolve) => setTimeout(resolve, 500));
    return mockMenuItems;
  }
  
  // 실제 API 호출
  const response = await axiosInstance.get('/customer/menus', {
    params: { store_id: storeId },
  });
  return response.data.menus.map(apiMenuToMenuItem);
}
```

### 지연 시간
- **로그인**: 800ms
- **메뉴 조회**: 500ms
- **주문 생성**: 800ms
- **주문 내역 조회**: 400ms
- **기타 API**: 300ms

### 데이터 저장
- **메뉴**: 읽기 전용 (변경 불가)
- **주문**: 메모리에 저장 (새로고침 시 초기화)
- **장바구니**: localStorage에 저장 (영구 보존)
- **세션**: localStorage에 저장 (영구 보존)

---

## 🛠️ Mock 데이터 커스터마이징

### 메뉴 추가/수정
`src/mocks/mockData.ts` 파일을 수정하여 메뉴를 추가하거나 변경할 수 있습니다:

```typescript
export const mockMenuItems: MenuItem[] = [
  // 새 메뉴 추가
  {
    id: 'menu-21',
    name: '새로운 메뉴',
    price: 20000,
    description: '맛있는 새 메뉴',
    imageUrl: 'https://example.com/image.jpg',
    categoryId: 'cat-1',
    categoryName: '메인',
    displayOrder: 8,
    isAvailable: true,
  },
  // ... 기존 메뉴
];
```

### 주문 데이터 수정
초기 주문 내역을 변경하려면 `mockOrders` 배열을 수정하세요:

```typescript
export const mockOrders: Order[] = [
  // 새 주문 추가
  {
    orderId: 'order-3',
    tableId: 'table-1',
    sessionId: 'session-12345',
    items: [...],
    totalAmount: 50000,
    status: 'pending',
    createdAt: new Date().toISOString(),
  },
];
```

---

## 🔄 Mock 모드 전환

### Mock → 실제 API
1. `.env` 파일 수정:
   ```env
   VITE_USE_MOCK=false
   ```
2. 개발 서버 재시작:
   ```bash
   npm run dev
   ```
3. 백엔드 API 서버 실행 필요

### 실제 API → Mock
1. `.env` 파일 수정:
   ```env
   VITE_USE_MOCK=true
   ```
2. 개발 서버 재시작
3. 백엔드 없이 테스트 가능

---

## ✅ Mock 데이터 테스트 체크리스트

### 로그인
- [ ] 올바른 비밀번호로 로그인 성공
- [ ] 잘못된 비밀번호로 로그인 실패
- [ ] 세션 localStorage 저장 확인

### 메뉴
- [ ] 20개 메뉴 표시
- [ ] 카테고리 필터링 작동
- [ ] 품절 메뉴 버튼 비활성화
- [ ] 이미지 지연 로딩

### 장바구니
- [ ] 메뉴 추가
- [ ] 수량 증가/감소
- [ ] 항목 삭제
- [ ] localStorage 동기화
- [ ] 총 금액 계산

### 주문
- [ ] 주문 생성
- [ ] 주문 확인 페이지 표시
- [ ] 자동 리다이렉트 (5초)
- [ ] 장바구니 초기화

### 주문 내역
- [ ] 기존 주문 2개 표시
- [ ] 새 주문 표시
- [ ] 상태별 스타일링
- [ ] 자동 폴링 (5분)

---

## 📝 참고사항

### 이미지 URL
- Mock 데이터의 이미지는 Unsplash에서 제공
- 인터넷 연결 필요
- 로딩 속도는 네트워크 상태에 따라 다름

### 데이터 초기화
- 브라우저 새로고침 시 주문 데이터 초기화
- localStorage 데이터는 유지 (장바구니, 세션)
- 완전 초기화: F12 → Application → Clear storage

### 제한사항
- 주문 상태 변경 불가 (항상 pending으로 생성)
- 메뉴 재고 관리 없음
- 실시간 업데이트 없음 (폴링만 지원)

---

**작성일**: 2026-02-04
**작성자**: AI-DLC System
**Mock 모드**: ✅ 활성화
**개발 서버**: http://localhost:5173/
